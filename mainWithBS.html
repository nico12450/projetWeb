<!doctype html>
<html lang="fr">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="styleWithBS.css">

    <title>Haunted House</title>
</head>

<body id='home'>

    <!-- <div class="container-fluid no-gutters">

        <div class="row no-gutters">

            <div class="col-12 col-md centeredText">col 1</div>
            <div class="col-12 col-md centeredText">col 2</div>
            <div class="col-12 col-md centeredText">col 3</div>

        </div>

    </div> -->

    <nav class="nav nav-pills nav-fill fixed-top bg-dark">

        <a href='#home'><img src="icone.png" alt="" class='icone m-2'></a>
        <a class="nav-item nav-link centeredText" href="#affiches">Affiches</a>
        <a class="nav-item nav-link centeredText" href="#infosPratiques">Infos pratiques</a>
        <a class="nav-item nav-link centeredText" href="#contact">Contact</a>

    </nav>

    <img src="bandeau.jpg" class="img-fluid mt-5" alt="Responsive image" id='bandeau'>

    <h2 id='affiches' class="text-center display-2 bg-dark text-light m-0">Films a l'affiche</h2>


    <div id="#carouselExampleIndicators" class="carousel slide" data-ride="carousel">

        <div class="carousel-inner">

        </div>

        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>

        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>

    </div>

    <div class='container'>

        <div class="row" id='conteneurAffiches'>



        </div>

    </div>

    <h2 id='infosPratiques' class="text-center display-2 bg-dark text-light m-0">Infos pratiques</h2>

    <div class="container pt-5 pb-5">

        <div class="row">

            <div class="col">

                <h3>avantages cinema</h3>

                <ul>

                    <li>Salle climatisee</li>
                    <li>Toutes les salles en IMAX</li>
                    <li>Son Digital Prologic Surround</li>

                </ul>

            </div>

            <div class="col">

                <h3>Tarifs</h3>

                <table>

                    <tr>
                        <td class='empty'></td>
                        <td colspan="2" class='description'>lundi au vendredi</td>
                        <td rowspan="2" class='description'>week-end</td>

                    </tr>

                    <tr>

                        <td class='empty'></td>
                        <td class='description'>de 9h à 18h</td>
                        <td class='description'>soiree</td>

                    </tr>

                    <tr>

                        <td class='description'>-14 ans</td>
                        <td class='contenu'>5€</td>
                        <td class='contenu'>6€</td>
                        <td class='contenu'>6€</td>

                    </tr>

                    <tr>

                        <td class='description'>Plein tarif</td>
                        <td class='contenu'>10€</td>
                        <td class='contenu'>12€</td>
                        <td class='contenu'>12.50€</td>

                    </tr>

                </table>

            </div>

        </div>

    </div>

    <h2 id='lieu' class="text-center display-2 bg-dark text-light m-0">Nous trouver</h2>

    <div class="container pt-5 pb-5">

        <div class="row">

            <div class="col">

                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2889.102962020364!2d3.913155215759677!3d43.604397763602606!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12b6a57a25cf48ef%3A0xe581c03f9077dc6b!2sGaumont%20Montpellier%20Multiplexe!5e0!3m2!1sfr!2sfr!4v1572432140015!5m2!1sfr!2sfr"
                    width="600" height="450" frameborder="0" style="border:0;" allowfullscreen=""></iframe>

            </div>

            <div class="col">

                <p>adresse : 235 Rue Georges Méliès, 34000 Montpellier</p>
                <p>téléphone : 0 892 69 66 96</p>

            </div>

        </div>

    </div>

    <h2 id='contact' class="text-center display-2 bg-dark text-light m-0">Nous contacter</h2>

    <form class='pt-5 pb-5'>
        <div class="form-group">
            <label for="exampleInputPassword1">Nom</label>
            <input type="nom" class="form-control" id="exampleInputPassword1" placeholder="Nom">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Prenom</label>
            <input type="prenom" class="form-control" id="exampleInputPassword1" placeholder="Prenom">
        </div>
        <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                placeholder="Enter email">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Telephone</label>
            <input type="telephone" class="form-control" id="exampleInputPassword1" placeholder="Telephone">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Sujet</label>
            <input type="sujet" class="form-control" id="exampleInputPassword1" placeholder="Sujet">
        </div>
        <div class="form-group">
            <label for="exampleFormControlTextarea1">Message</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Envoyer</button>
    </form>

    <footer class='containered columned text-center'>

        <h3>Reseaux sociaux</h3>

        <div id='iconesReseaux' class='container'>

            <img src='iconesReseaux/facebook.svg' alt="" class='iconeReseau'>
            <img src='iconesReseaux/twitter.svg' alt="" class='iconeReseau'>
            <img src='iconesReseaux/telegram.svg' alt="" class='iconeReseau'>
            <img src='iconesReseaux/youtube.svg' alt="" class='iconeReseau'>

        </div>

        <div class="footer-copyright text-center py-3">© Copyright 2019
        </div>

    </footer>


    <div class="modal" tabindex="-1" role="dialog" id="exampleModal" style='color : black;'>
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reservation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <fieldset>
                        <legend>Tarif</legend>
                        <p>
                            <label>Select tarif</label>
                            <select id="myList1" onchange="getPrixUnitaire();getPrixTotal()">
                                <option value="1">-14</option>
                                <option value="2">plein tarif</option>
                            </select>
                        </p>
                    </fieldset>
                    <fieldset>
                        <legend>Seance</legend>
                        <p>
                            <label>Select seance</label>
                            <select id="myList2" onchange="getPrixUnitaire();getPrixTotal()">
                                <option value="1">semaine</option>
                                <option value="2">week end</option>
                            </select>
                        </p>
                    </fieldset>
                    <fieldset>
                        <legend>Quantite</legend>
                        <p>
                            <label>Nombre de places</label>
                            <input type="number" id='nbPlaces' onchange="getPrixTotal();">
                        </p>
                    </fieldset>
                    <fieldset>
                        <legend>Prix</legend>
                        <p>
                            <label>Prix unitaire : </label>
                            <input type="text" id='prixUnitaire'>
                        </p>
                        <p>
                            <label>Prix total : </label>
                            <input type="text" id='prixTotal'>
                        </p>
                    </fieldset>
                    <p>Reservations :</p>
                    <div id='reservations'>


                    </div>

                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-primary" onclick="ajoutReservation()">Ajouter</button>
                    <button type="button" class="btn btn-danger" onclick="supprimerReservation()">Supprimer</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                </div>
            </div>
        </div>
    </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script>

        nbAffiches = 10;

        $(document).ready(function () {

            $('.nav-item').on('click', function (e) {

                $(this).tab('show');

            });

            for (i = 1; i <= nbAffiches; i++) {

                if (i == 1) {

                    element = "<div class = 'carousel-item active'>" +
                        "<img src = 'affiches/affiche" + i + ".jpg' class = 'd-block w-100 affiche'>" +
                        "</div>"

                }

                else {

                    element = "<div class = 'carousel-item'>" +
                        "<img src = 'affiches/affiche" + i + ".jpg' class = 'd-block w-100 affiche'>" +
                        "</div>"

                }

                element2 = "<div class = 'col-6 col-md-3'>" +
                    "<img src = 'affiches/affiche" + i + ".jpg' class = 'd-block w-100 affiche'>" +
                    "<button type='button' class='btn btn-primary' data-toggle='modal' data-target='#exampleModal'>Reserver</button>" +
                    "</div>"



                $('.carousel-inner').append(element);
                $('#conteneurAffiches').append(element2);

            }

        });

        var key = localStorage.length;
        var tabChoix1 = ['-14', 'plein tarif'];
        var tabChoix2 = ['semaine', 'week-end'];

        afficherReservations();

        function getPrixUnitaire() {

            var prix = 0;
            var choix1 = document.querySelector('#myList1').value;
            var choix2 = document.querySelector('#myList2').value;

            switch (choix1) {

                case '1':
                    prix += 5;
                    break;

                case '2':
                    prix += 10;
                    break;

            }


            if (choix2 == '2') {

                prix += 2;

            }

            document.querySelector('#prixUnitaire').value = prix;
            return prix;

        }

        function getPrixTotal() {

            document.querySelector('#prixTotal').value = document.querySelector('#nbPlaces').value * getPrixUnitaire();

        }

        function ajoutReservation() {

            var mytarif = tabChoix1[document.querySelector('#myList1').value - 1];
            var myhoraire = tabChoix2[document.querySelector('#myList2').value - 1];
            var mynbPlaces = document.querySelector('#nbPlaces').value;
            var myprixUnitaire = document.querySelector('#prixUnitaire').value;
            var myprixTotal = document.querySelector('#prixTotal').value;

            var reservation = {

                tarif: mytarif,
                horaire: myhoraire,
                nbPlaces: mynbPlaces,
                prixUnitaire: myprixUnitaire,
                prixTotal: myprixTotal

            };

            localStorage.setItem(key, JSON.stringify(reservation));
            key += 1;
            afficherReservations();

        }

        function afficherReservation(reservation) {

            var paragraphe = document.createElement('p');

            var description = "tarif : " + reservation.tarif +
                " seance : " + reservation.horaire +
                " places : " + reservation.nbPlaces +
                " prix : " + reservation.prixTotal + " €";

            paragraphe.appendChild(document.createTextNode(description));
            $('#reservations').append(paragraphe);

        }

        function afficherReservations() {

            $('#reservations').empty();

            var keys = Object.keys(localStorage);

            for (k in keys) {

                afficherReservation(JSON.parse(localStorage.getItem(keys[k])));

            }

        }

        function supprimerReservation() {

            var last = localStorage.length - 1;
            console.log(localStorage.length);
            localStorage.removeItem(last)
            afficherReservations();
            key--;

        }

    </script>

</body>

</html>